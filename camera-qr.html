<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no">
    <title>Member Point</title>
    <link rel="manifest" href="/manifest.json">


    <link href="./dist/styles.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@300..700&display=swap" rel="stylesheet"> 
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">

</head>
<body class="bg-black text-gray-900 font-sans">
    <header class="bg-white text-black fixed w-full z-10 px-6 py-4 flex justify-between items-center dark:bg-black">
        <img src="/assets/modified-logo.png" alt="" class="w-14">
        <img src="/assets/no-photo.jpg" alt="Profile Picture" class="w-10 h-10 rounded-full border-2 border-black">
    </header>

    <main class="container mx-auto px-6 pb-24 mb-0 w-full">
        <div class="fixed top-0 left-0 w-full h-full flex items-center justify-center">
            <p id="message-scan" class="fixed top-20 text-sm font-medium text-white text-center z-10">
                Arahkan barcode ke dalam kotak
                <br>    
                Scan barcode hanya jika ditunjukkan kasir
            </p>
            
            <div id="reader" class="bg-white fixed top-0 h-full"></div>
            <div id="result" class="bg-green-500 text-white font-medium top-0 w-full h-full flex-col justify-center items-center" style="display: none;"></div>

        </div>
    
        <script src="https://cdnjs.cloudflare.com/ajax/libs/html5-qrcode/2.3.4/html5-qrcode.min.js" integrity="sha512-k/KAe4Yff9EUdYI5/IAHlwUswqeipP+Cp5qnrsUjTPCgl51La2/JhyyjNciztD7mWNKLSXci48m7cctATKfLlQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    
        <script>

const scanner = new Html5QrcodeScanner('reader', { 
        // Scanner will be initialized in DOM inside element with id of 'reader'
        qrbox: {
            width: 250,
            height: 250,
        },  // Sets dimensions of scanning box (set relative to reader element width)
        fps: 30, // Frames per second to attempt a scan
    });


    scanner.render(success, error);
    // Starts scanner

    function success(result) {
        document.getElementById('result').style.display = "flex";
        document.getElementById('result').innerHTML = `
        <h2>Success!</h2>
        <p><a href="${result}">${result}</a></p>
        `;
        // Prints result as a link inside result element

        scanner.clear();
        // Clears scanning instance

        document.getElementById('reader').remove();
        document.getElementById('message-scan').remove();
        // Removes reader element from DOM since no longer needed
    
    }

    function error(err) {
        console.error(err);
        // Prints any errors to the console
    }


        </script>
    </main>
        
    
    
    <footer class="bg-white text-black p-2 fixed bottom-0 left-0 w-full z-10 border-t border-gray-300">
        <nav class="flex justify-center">
            <a href="/index.html" class="mx-1 w-[80px] bg-white text-gray-400 p-2 rounded-lg flex-row text-center">
                <i class="fas fa-home text-lg"></i>
                <p class="text-sm font-sans font-medium truncate">Beranda</p>
            </a>

            <a href="/point.html" class="mr-8 w-[80px] bg-white text-gray-400 p-2 rounded-lg flex-row text-center">
                <i class="fas fa-bag-shopping text-lg"></i>
                <p class="text-sm font-sans font-medium truncate">Poin</p>
            </a>

            <a href="#" class="w-[60px] h-[60px] bg-yellow-300 text-black p-2 border-4 border-white rounded-xl fixed bottom-8 flex justify-center items-center text-center">
                <i class="fas fa-qrcode text-3xl"></i>
            </a>

            <a href="#" class="ml-8 w-[80px] bg-white text-gray-400 p-2 rounded-lg flex-row text-center">
                <i class="fas fa-clock-rotate-left text-lg"></i>
                <p class="text-sm font-sans font-medium truncate">Riwayat</p>
            </a>
            <a href="#" class="mx-1 w-[80px] bg-white text-gray-400 p-2 rounded-lg flex-row text-center">
                <i class="fas fa-gear text-lg"></i>
                <p class="text-sm font-sans font-medium truncate">Pengaturan</p>
            </a>
        </nav>
    </footer>
    
</body>
</html>